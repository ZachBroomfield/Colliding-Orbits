var St=(r,t,i)=>{if(!t.has(r))throw TypeError("Cannot "+i)};var a=(r,t,i)=>{if(t.has(r))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(r):t.set(r,i)};var c=(r,t,i)=>(St(r,t,"access private method"),i);const Lt=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))s(e);new MutationObserver(e=>{for(const n of e)if(n.type==="childList")for(const h of n.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&s(h)}).observe(document,{childList:!0,subtree:!0});function i(e){const n={};return e.integrity&&(n.integrity=e.integrity),e.referrerpolicy&&(n.referrerPolicy=e.referrerpolicy),e.crossorigin==="use-credentials"?n.credentials="include":e.crossorigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function s(e){if(e.ep)return;e.ep=!0;const n=i(e);fetch(e.href,n)}};Lt();class At{constructor(t,i){this.canvas=t,this.ctx=t.getContext(i),this.canvas.width=innerWidth,this.canvas.height=innerHeight}clear(){this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height)}drawCircle(t){this.ctx.beginPath(),this.ctx.arc(t.position.x,t.position.y,t.radius,Math.PI*2,!1),this.ctx.fillStyle=t.colour?t.colour:"black",this.ctx.fill()}getCenter(){return{x:this.canvas.width/2,y:this.canvas.height/2}}}var p,_;class U{static calc(t,i){return c(this,p,_).call(this,t,i)}}p=new WeakSet,_=function(t,i){return(t.position.x-i.position.x)**2+(t.position.y-i.position.y)**2},a(U,p);class tt{static get(){return 1e-5}}var x,st;class it{static calc(t,i){return c(this,x,st).call(this,t,i)}}x=new WeakSet,st=function(t,i){let s=U.calc(t,i);return s=s<1?1:s,tt.get()*t.mass*i.mass/s},a(it,x);var g,et;class j{static calc(t,i){return c(this,g,et).call(this,t,i)}}g=new WeakSet,et=function(t,i){return Math.atan2(i.position.y-t.position.y,i.position.x-t.position.x)},a(j,g);var v,at;class ct{static check(t,i){return c(this,v,at).call(this,t,i)}}v=new WeakSet,at=function(t,i){const s=(t.radius+i.radius)**2,e=(t.position.x-i.position.x)**2,n=(t.position.y-i.position.y)**2;return s>e+n},a(ct,v);var f,rt;class nt{static check(t,i){return c(this,f,rt).call(this,t,i)}}f=new WeakSet,rt=function(t,i){return ct.check(t,i)},a(nt,f);var d,D;const u=class{constructor(t={x:0,y:0}){a(this,d);this.x=t.x,this.y=t.y}unitVector(){const t=c(this,d,D).call(this);return t!=0?new u({x:this.x/t,y:this.y/t}):new u}mag(){return c(this,d,D).call(this)}add(t){return new u({x:this.x+t.x,y:this.y+t.y})}minus(t){return new u({x:this.x-t.x,y:this.y-t.y})}multiplication(t){return new u({x:t*this.x,y:t*this.y})}dotProduct(t){return this.x*t.x+this.y*t.y}};let l=u;d=new WeakSet,D=function(){return Math.sqrt(this.x**2+this.y**2)};var P,ot;class B{static calc(t,i){return c(this,P,ot).call(this,t,i)}}P=new WeakSet,ot=function(t,i){return Math.hypot(t.position.x-i.position.x,t.position.y-i.position.y)},a(B,P);var w,lt,C,ut,M,ht,N,yt,m,K,T,dt,O,mt;class o{static normalise(t){c(this,w,lt).call(this,t)}}w=new WeakSet,lt=function(t){for(let i=0;i<t.length;i++)for(let s=i+1;s<t.length;s++)nt.check(t[i],t[s])&&c(this,C,ut).call(this,t[i],t[s])},C=new WeakSet,ut=function(t,i){const s=c(this,M,ht).call(this,t,i),e=c(this,N,yt).call(this,t,i);c(this,T,dt).call(this,t,i,e),c(this,O,mt).call(this,t,i,s)},M=new WeakSet,ht=function(t,i){const s=B.calc(t,i),e=j.calc(t,i),n=(t.radius+i.radius-s)/2;return{angle:e,difference:n}},N=new WeakSet,yt=function(t,i){const e=t.position.minus(i.position).unitVector(),n=new l({x:-e.y,y:e.x}),h=e.dotProduct(t.velocity),Vt=n.dotProduct(t.velocity),J=e.dotProduct(i.velocity),qt=n.dotProduct(i.velocity),kt=c(this,m,K).call(this,t,i,h,J),It=c(this,m,K).call(this,i,t,J,h),Q=e.multiplication(kt),X=n.multiplication(Vt),Y=e.multiplication(It),Z=n.multiplication(qt);return{first:{x:Q.x+X.x,y:Q.y+X.y},second:{x:Y.x+Z.x,y:Y.y+Z.y}}},m=new WeakSet,K=function(t,i,s,e){return(s*(t.mass-i.mass)+2*i.mass*e)/(t.mass+i.mass)},T=new WeakSet,dt=function(t,i,s){t.velocity=new l(s.first),i.velocity=new l(s.second)},O=new WeakSet,mt=function(t,i,s){t.position=t.position.minus({x:Math.cos(s.angle)*s.difference,y:Math.sin(s.angle)*s.difference}),i.position=i.position.add({x:Math.cos(s.angle)*s.difference,y:Math.sin(s.angle)*s.difference})},a(o,w),a(o,C),a(o,M),a(o,N),a(o,m),a(o,T),a(o,O);var b,pt,V,xt;class R{static update(t){c(this,b,pt).call(this,t),c(this,V,xt).call(this,t),o.normalise(t)}}b=new WeakSet,pt=function(t){for(let i=0;i<t.length;i++)for(let s=i+1;s<t.length;s++){const e=it.calc(t[i],t[s]),n=j.calc(t[i],t[s]);t[i].updateVelocity(e,n),t[s].updateVelocity(e,n-Math.PI)}},V=new WeakSet,xt=function(t){t.forEach(i=>i.updatePosition())},a(R,b),a(R,V);var q,gt,k,vt;class Et{constructor({position:t,velocity:i,radius:s,colour:e,mass:n}){a(this,q);a(this,k);this.position=t,this.velocity=i,this.radius=s,this.colour=e,this.mass=n}updateVelocity(t,i){this.velocity=c(this,q,gt).call(this,t,i)}updatePosition(){this.position=c(this,k,vt).call(this)}}q=new WeakSet,gt=function(t,i){return this.velocity.add(new l({x:Math.cos(i)*t/this.mass,y:Math.sin(i)*t/this.mass}))},k=new WeakSet,vt=function(){return this.position.add(this.velocity)};var I,ft,S,Pt,L,wt,A,Ct;class y{static calc(t){return c(this,I,ft).call(this,t)}}I=new WeakSet,ft=function(t){const i=c(this,S,Pt).call(this,t),s=c(this,A,Ct).call(this,t);return{x:Math.cos(s)*i+t.circleToOrbit.velocity.x,y:Math.sin(s)*i+t.circleToOrbit.velocity.y}},S=new WeakSet,Pt=function(t){const i=c(this,L,wt).call(this,t),s=B.calc(t,t.circleToOrbit);return Math.sqrt(i/s)},L=new WeakSet,wt=function(t){return tt.get()*(t.circleToOrbit.mass+t.mass)},A=new WeakSet,Ct=function(t){const i=Math.random()>.5?2:-2;return j.calc(t,t.circleToOrbit)+Math.PI/i},a(y,I),a(y,S),a(y,L),a(y,A);var E,Nt;class Mt{static create(t){return c(this,E,Nt).call(this,t)}}E=new WeakSet,Nt=function(t){return!t.velocity&&t.circleToOrbit&&(t.velocity=y.calc(t)),new Et({position:new l(t.position),velocity:new l(t.velocity),radius:t.radius,colour:t.colour,mass:t.mass})},a(Mt,E);class Ft{constructor(t){this.canvasHandler=t,this.circles=[]}addCircle(t){this.circles.push(Mt.create(t))}updateCircles(){R.update(this.circles)}drawCircles(){this.circles.forEach(t=>this.canvasHandler.drawCircle(t))}}class ${static getCentral(t){return{position:t,velocity:{x:0,y:0},radius:20,colour:"orange",mass:33e5}}static getOrbitingCentral(t){return[{position:{x:t.x-300,y:t.y},radius:5,colour:"green",mass:10},{position:{x:t.x+300,y:t.y},radius:5,colour:"gray",mass:10},{position:{x:t.x+400,y:t.y},radius:5,colour:"blue",mass:10},{position:{x:t.x,y:t.y-550},radius:5,colour:"red",mass:10}]}}var F,Tt,G,Ot;class W{static setup(t,i){const s=c(this,F,Tt).call(this,t,i);c(this,G,Ot).call(this,t,s)}}F=new WeakSet,Tt=function(t,i){const s=$.getCentral(i);return t.addCircle(s),s},G=new WeakSet,Ot=function(t,i){$.getOrbitingCentral(i.position).forEach(s=>{s.circleToOrbit=i,t.addCircle(s)})},a(W,F),a(W,G);const Gt=document.querySelector("canvas"),H=new At(Gt,"2d"),z=new Ft(H);W.setup(z,H.getCenter());function bt(){requestAnimationFrame(bt),H.clear(),z.updateCircles(),z.drawCircles()}bt();
